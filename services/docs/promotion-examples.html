<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="description" content="">
  <meta name="author" content="">

  <link rel="apple-touch-icon" sizes="57x57" href="../../assets//favicon/apple-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="60x60" href="../../assets//favicon/apple-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="72x72" href="../../assets//favicon/apple-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="76x76" href="../../assets//favicon/apple-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="114x114" href="../../assets//favicon/apple-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="120x120" href="../../assets//favicon/apple-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="144x144" href="../../assets//favicon/apple-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="152x152" href="../../assets//favicon/apple-icon-152x152.png">
  <link rel="apple-touch-icon" sizes="180x180" href="../../assets//favicon/apple-icon-180x180.png">
  <link rel="icon" type="image/png" sizes="192x192" href="../../assets//favicon/android-icon-192x192.png">
  <link rel="icon" type="image/png" sizes="32x32" href="../../assets//favicon/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="96x96" href="../../assets//favicon/favicon-96x96.png">
  <link rel="icon" type="image/png" sizes="16x16" href="../../assets//favicon/favicon-16x16.png">
  <link rel="manifest" href="../../assets//favicon/manifest.json">
  <meta name="msapplication-TileColor" content="#ffffff">
  <meta name="msapplication-TileImage" content=""../../assets//favicon/ms-icon-144x144.png">
  <meta name="theme-color" content="#ffffff">

  <title>MicroBase · eCommerce made simple</title>

  <link href="../../assets//css/bootstrap.css" rel="stylesheet">
  <link href="../../assets//css/overwrites.css" rel="stylesheet">
  <link href="../../assets//css/main.css" rel="stylesheet">
  <link href="../../assets//fonts/pictoicons/css/picto.css" rel="stylesheet">
  <link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet">

  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.5.0/styles/tomorrow.min.css">

  <link href='https://fonts.googleapis.com/css?family=Lato:300,400,900' rel='stylesheet' type='text/css'>

  <!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
  <!--[if lt IE 9]>
  <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
  <script src="https://oss.maxcdn.com/libs/respond.js/1.3.0/respond.min.js"></script>
  <![endif]-->

  <script>
    (function (i, s, o, g, r, a, m) {
      i['GoogleAnalyticsObject'] = r;
      i[r] = i[r] || function () {
          (i[r].q = i[r].q || []).push(arguments)
        }, i[r].l = 1 * new Date();
      a = s.createElement(o),
        m = s.getElementsByTagName(o)[0];
      a.async = 1;
      a.src = g;
      m.parentNode.insertBefore(a, m)
    })(window, document, 'script', 'https://www.google-analytics.com/analytics.js', 'ga');

    ga('create', 'UA-88562993-1', 'auto');
    ga('send', 'pageview');

  </script>

</head>

<body class="white">

<!-- Fixed navbar -->
<div class="header navbar navbar-default navbar-fixed-top">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle" data-toggle="collapse"
              data-target=".navbar-collapse">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="http://microbase.io"><img
          src="../../assets//img/logo.png" alt="MICRO-BASE"/></a>
    </div>
    <div class="navbar-collapse collapse">
      <ul class="nav navbar-nav navbar-right">
        <li><a href="http://docs.microbase.io">See the docs <strong style="margin-left:5px"><i class="fa fa-book" style="color: #00aced"></i></strong> &gt;</a></li>
      </ul>
    </div><!--/.nav-collapse -->
  </div>
</div>
<div class="page-content">
  <div class="container">
    <nav class="col-xs-3">
      <ul>
        <li><a href="../../index.html">Overview</a></li>
      </ul>
      <ul>
        <li><a href="../ecomm-setup.html">Setup</a></li>
      </ul>
      <ul>
        <li><a href="../base-examples.html">Examples</a></li>
      </ul>
      <ul>
        <li><a href="../fakeData.html">Fake Data</a></li>
      </ul>
      ________________________
      <h3>Examples TOC</h3><ul>
  <li><a href="#examples">Examples</a></li>
</ul>      ________________________

      <h3>Services</h3>
      <ul>
        <li><a href="../micro-cart-service.html">Cart</a></li>
        <li><a href="../micro-catalog-service.html">Catalog</a></li>
        <li><a href="../micro-customer-service.html">Customer</a></li>
        <li><a href="../micro-oauth-service.html">Oauth</a></li>
        <li><a href="../micro-payment-service.html">Payment</a></li>
        <li><a href="../micro-promotion-service.html">Promotion</a></li>
        <li><a href="../micro-recommendation-service.html">Recommendation</a></li>
        <li><a href="../micro-stock-service.html">Stock</a></li>
        <li><a href="../micro-tax-service.html">Tax</a></li>
      </ul>
      <h3>API</h3>
      <ul>
        <li><a href="../../api/calling-conventions.html">Calling conventions</a>
          
        <li><a href="../../api/cart.addToCart.html">cart.addToCart</a>
          <a href="../../api/v1/cart.addToCart.html">[v1]</a>
        <li><a href="../../api/cart.calculateCart.html">cart.calculateCart</a>
          <a href="../../api/v1/cart.calculateCart.html">[v1]</a>
        <li><a href="../../api/cart.checkout.html">cart.checkout</a>
          <a href="../../api/v1/cart.checkout.html">[v1]</a>
        <li><a href="../../api/cart.create.html">cart.create</a>
          <a href="../../api/v1/cart.create.html">[v1]</a>
        <li><a href="../../api/cart.info.html">cart.info</a>
          <a href="../../api/v1/cart.info.html">[v1]</a>
        <li><a href="../../api/cart.list.html">cart.list</a>
          
        <li><a href="../../api/cart.removeFromCart.html">cart.removeFromCart</a>
          <a href="../../api/v1/cart.removeFromCart.html">[v1]</a>
        <li><a href="../../api/cart.setBillingAddress.html">cart.setBillingAddress</a>
          <a href="../../api/v1/cart.setBillingAddress.html">[v1]</a>
        <li><a href="../../api/cart.setPaymentGateway.html">cart.setPaymentGateway</a>
          <a href="../../api/v1/cart.setPaymentGateway.html">[v1]</a>
        <li><a href="../../api/cart.setShippingAddress.html">cart.setShippingAddress</a>
          <a href="../../api/v1/cart.setShippingAddress.html">[v1]</a>
        <li><a href="../../api/cart.setShippingMethod.html">cart.setShippingMethod</a>
          <a href="../../api/v1/cart.setShippingMethod.html">[v1]</a>
        <li><a href="../../api/category.create.html">category.create</a>
          <a href="../../api/v1/category.create.html">[v1]</a>
        <li><a href="../../api/category.info.html">category.info</a>
          <a href="../../api/v1/category.info.html">[v1]</a>
        <li><a href="../../api/category.list.html">category.list</a>
          <a href="../../api/v1/category.list.html">[v1]</a>
        <li><a href="../../api/category.remove.html">category.remove</a>
          <a href="../../api/v1/category.remove.html">[v1]</a>
        <li><a href="../../api/category.update.html">category.update</a>
          <a href="../../api/v1/category.update.html">[v1]</a>
        <li><a href="../../api/customer.address.create.html">customer.address.create</a>
          
        <li><a href="../../api/customer.address.info.html">customer.address.info</a>
          
        <li><a href="../../api/customer.address.remove.html">customer.address.remove</a>
          
        <li><a href="../../api/customer.address.update.html">customer.address.update</a>
          
        <li><a href="../../api/customer.checkCredentials.html">customer.checkCredentials</a>
          
        <li><a href="../../api/customer.create.html">customer.create</a>
          
        <li><a href="../../api/customer.info.html">customer.info</a>
          
        <li><a href="../../api/customer.list.html">customer.list</a>
          
        <li><a href="../../api/customer.remove.html">customer.remove</a>
          
        <li><a href="../../api/customer.update.html">customer.update</a>
          
        <li><a href="../../api/payment.authorize.html">payment.authorize</a>
          
        <li><a href="../../api/payment.capture.html">payment.capture</a>
          
        <li><a href="../../api/payment.create.html">payment.create</a>
          
        <li><a href="../../api/payment.info.html">payment.info</a>
          
        <li><a href="../../api/payment.list.html">payment.list</a>
          
        <li><a href="../../api/payment.purchase.html">payment.purchase</a>
          
        <li><a href="../../api/payment.remove.html">payment.remove</a>
          
        <li><a href="../../api/payment.token.html">payment.token</a>
          
        <li><a href="../../api/payment.update.html">payment.update</a>
          
        <li><a href="../../api/product.create.html">product.create</a>
          <a href="../../api/v1/product.create.html">[v1]</a>
        <li><a href="../../api/product.info.html">product.info</a>
          <a href="../../api/v1/product.info.html">[v1]</a>
        <li><a href="../../api/product.list.html">product.list</a>
          <a href="../../api/v1/product.list.html">[v1]</a>
        <li><a href="../../api/product.remove.html">product.remove</a>
          <a href="../../api/v1/product.remove.html">[v1]</a>
        <li><a href="../../api/product.update.html">product.update</a>
          <a href="../../api/v1/product.update.html">[v1]</a>
        <li><a href="../../api/promotion.cartPromotions.html">promotion.cartPromotions</a>
          <a href="../../api/v1/promotion.cartPromotions.html">[v1]</a>
        <li><a href="../../api/promotion.create.html">promotion.create</a>
          <a href="../../api/v1/promotion.create.html">[v1]</a>
        <li><a href="../../api/promotion.remove.html">promotion.remove</a>
          <a href="../../api/v1/promotion.remove.html">[v1]</a>
        <li><a href="../../api/recommendation.alsoviewed.html">recommendation.alsoviewed</a>
          
        <li><a href="../../api/shipping.create.html">shipping.create</a>
          
        <li><a href="../../api/shipping.getShippingMethods.html">shipping.getShippingMethods</a>
          
        <li><a href="../../api/shipping.info.html">shipping.info</a>
          
        <li><a href="../../api/shipping.remove.html">shipping.remove</a>
          
        <li><a href="../../api/stock.create.html">stock.create</a>
          
        <li><a href="../../api/stock.info.html">stock.info</a>
          
        <li><a href="../../api/stock.remove.html">stock.remove</a>
          
        <li><a href="../../api/stock.reserve.html">stock.reserve</a>
          
        <li><a href="../../api/stock.reserve.renew.html">stock.reserve.renew</a>
          
        <li><a href="../../api/stock.unreserve.html">stock.unreserve</a>
          
        <li><a href="../../api/stock.update.html">stock.update</a>
          
        <li><a href="../../api/tax.cartTaxes.html">tax.cartTaxes</a>
          <a href="../../api/v1/tax.cartTaxes.html">[v1]</a>
        <li><a href="../../api/tax.create.html">tax.create</a>
          <a href="../../api/v1/tax.create.html">[v1]</a>
        <li><a href="../../api/tax.info.html">tax.info</a>
          <a href="../../api/v1/tax.info.html">[v1]</a>
        <li><a href="../../api/tax.list.html">tax.list</a>
          <a href="../../api/v1/tax.list.html">[v1]</a>
        <li><a href="../../api/tax.remove.html">tax.remove</a>
          <a href="../../api/v1/tax.remove.html">[v1]</a>
        <li><a href="../../api/tax.update.html">tax.update</a>
          <a href="../../api/v1/tax.update.html">[v1]</a>
      </ul>
      <h3>Base Modules</h3>
      <ul>
        <li><a href="../../modules/admin.html">Admin</a></li>
        <li><a href="../../modules/bus.html">Bus</a></li>
        <li><a href="../../modules/cache.html">Cache</a></li>
        <li><a href="../../modules/config.html">Config</a></li>
        <li><a href="../../modules/db.html">DB</a></li>
        <li><a href="../../modules/impex.html">Impex</a></li>
        <li><a href="../../modules/logger.html">Logger</a></li>
        <li><a href="../../modules/logstash.html">Logstash</a></li>
        <li><a href="../../modules/migrations.html">Migrations</a></li>
        <li><a href="../../modules/probes.html">Probes</a></li>
        <li><a href="../../modules/search.html">Search</a></li>
        <li><a href="../../modules/services.html">Services</a></li>
        <li><a href="../../modules/tokens.html">Tokens</a></li>
        <li><a href="../../modules/transports.html">Transports</a></li>
        <li><a href="../../modules/utils.html">Utils</a></li>
        <li><a href="../../modules/workers.html">Workers</a></li>
      </ul>
    </nav>
    <div class="col-xs-9"><h1 id="examples">Examples</h1>
<h2 id="rules-and-discounts">Rules and discounts</h2>
<h3 id="product-promotions">Product Promotions</h3>
<h4 id="1-bundle">1 - Bundle</h4>
<p>ie: Buy A, B, and C for €50</p>
<p><em>Resolved as fixed price product A plus free products B and C</em></p>
<pre class="hljs"><code>{
  <span class="hljs-attr">"if"</span>: {
    <span class="hljs-attr">"all"</span>: [
      {<span class="hljs-attr">"product"</span>: {
        <span class="hljs-attr">"id"</span>: <span class="hljs-string">"pA"</span>,
        <span class="hljs-attr">"quantity"</span>: <span class="hljs-number">1</span>
      }},
      {<span class="hljs-attr">"product"</span>: {
        <span class="hljs-attr">"id"</span>: <span class="hljs-string">"pB"</span>,
        <span class="hljs-attr">"quantity"</span>: <span class="hljs-number">1</span>
      }},
      {<span class="hljs-attr">"product"</span>: {
        <span class="hljs-attr">"id"</span>: <span class="hljs-string">"pC"</span>,
        <span class="hljs-attr">"quantity"</span>: <span class="hljs-number">1</span>
      }}
    ]
  },
  <span class="hljs-attr">"then"</span>: {
    <span class="hljs-attr">"all"</span>: [
      {<span class="hljs-attr">"product"</span>: {
        <span class="hljs-attr">"id"</span>: <span class="hljs-string">"pA"</span>,
        <span class="hljs-attr">"quantity"</span>: <span class="hljs-number">1</span>,
        <span class="hljs-attr">"discount"</span>: {
          <span class="hljs-attr">"rate"</span>: <span class="hljs-number">5000</span>,
          <span class="hljs-attr">"isFixedPrice"</span>: <span class="hljs-literal">true</span>
        }
      }},
      {<span class="hljs-attr">"product"</span>: {
        <span class="hljs-attr">"id"</span>: <span class="hljs-string">"pB"</span>,
        <span class="hljs-attr">"quantity"</span>: <span class="hljs-number">1</span>,
        <span class="hljs-attr">"discount"</span>: {
          <span class="hljs-attr">"rate"</span>: <span class="hljs-number">100</span>,
          <span class="hljs-attr">"isPercentage"</span>: <span class="hljs-literal">true</span>
        }
      }},
      {<span class="hljs-attr">"product"</span>: {
        <span class="hljs-attr">"id"</span>: <span class="hljs-string">"pC"</span>,
        <span class="hljs-attr">"quantity"</span>: <span class="hljs-number">1</span>,
        <span class="hljs-attr">"discount"</span>: {
          <span class="hljs-attr">"rate"</span>: <span class="hljs-number">100</span>,
          <span class="hljs-attr">"isPercentage"</span>: <span class="hljs-literal">true</span>
        }
      }}
    ]
  }
}</code></pre><h4 id="2-buy-x-get-y-free">2 - Buy X get Y free</h4>
<p>ie: Buy one get one free.</p>
<pre class="hljs"><code>{
  <span class="hljs-attr">"if"</span>: {
    <span class="hljs-attr">"category"</span>: {
      <span class="hljs-attr">"id"</span>: <span class="hljs-string">"c1"</span>,
      <span class="hljs-attr">"quantity"</span>: <span class="hljs-number">2</span>
    }
  },
  <span class="hljs-attr">"then"</span>: {
    <span class="hljs-attr">"category"</span>: {
      <span class="hljs-attr">"id"</span>: <span class="hljs-string">"c1"</span>,
      <span class="hljs-attr">"quantity"</span>: <span class="hljs-number">1</span>,
      <span class="hljs-attr">"discount"</span>: {
        <span class="hljs-attr">"rate"</span>: <span class="hljs-number">100</span>,
        <span class="hljs-attr">"isPercentage"</span>: <span class="hljs-literal">true</span>
      }
    }
  }
}</code></pre><h4 id="3-fixed-price">3 - Fixed price</h4>
<p>ie: All shirts €5 each.</p>
<pre class="hljs"><code>{
  <span class="hljs-attr">"if"</span>: {
    <span class="hljs-attr">"category"</span>: {
      <span class="hljs-attr">"id"</span>: <span class="hljs-string">"shirts-cat"</span>,
      <span class="hljs-attr">"quantity"</span>: <span class="hljs-number">1</span>
    }
  },
  <span class="hljs-attr">"then"</span>: {
    <span class="hljs-attr">"category"</span>: {
      <span class="hljs-attr">"id"</span>: <span class="hljs-string">"shirts-cat"</span>,
      <span class="hljs-attr">"quantity"</span>: <span class="hljs-number">1</span>,
      <span class="hljs-attr">"discount"</span>: {
        <span class="hljs-attr">"rate"</span>: <span class="hljs-number">500</span>,
        <span class="hljs-attr">"isFixedPrice"</span>: <span class="hljs-literal">true</span>
      }
    }
  }
}</code></pre><h4 id="4-multi-buy">4 - Multi-buy</h4>
<p>ie: Buy any 3 shirts for €50.</p>
<p><em>Resolved as 1 fixed price shirt plus two free shirts</em></p>
<pre class="hljs"><code>{
  <span class="hljs-attr">"if"</span>: {
    <span class="hljs-attr">"category"</span>: {
      <span class="hljs-attr">"id"</span>: <span class="hljs-string">"shirts-cat"</span>,
      <span class="hljs-attr">"quantity"</span>: <span class="hljs-number">3</span>
    }
  },
  <span class="hljs-attr">"then"</span>: {
    <span class="hljs-attr">"all"</span>: [
      {<span class="hljs-attr">"category"</span>: {
        <span class="hljs-attr">"id"</span>: <span class="hljs-string">"shirts-cat"</span>,
        <span class="hljs-attr">"quantity"</span>: <span class="hljs-number">1</span>,
        <span class="hljs-attr">"discount"</span>: {
          <span class="hljs-attr">"rate"</span>: <span class="hljs-number">5000</span>,
          <span class="hljs-attr">"isFixedPrice"</span>: <span class="hljs-literal">true</span>
        }
      }},
      {<span class="hljs-attr">"category"</span>: {
        <span class="hljs-attr">"id"</span>: <span class="hljs-string">"shirts-cat"</span>,
        <span class="hljs-attr">"quantity"</span>: <span class="hljs-number">2</span>,
        <span class="hljs-attr">"discount"</span>: {
          <span class="hljs-attr">"rate"</span>: <span class="hljs-number">100</span>,
          <span class="hljs-attr">"isPercentage"</span>: <span class="hljs-literal">true</span>
        }
      }}
    ]
  }
}</code></pre><h4 id="5-stepped-multi-buy">5 - Stepped multi-buy</h4>
<p>N/A</p>
<h4 id="6-perfect-partner">6 - Perfect partner</h4>
<p>ie: Buy a game for €10 with each games console.</p>
<pre class="hljs"><code>{
  <span class="hljs-attr">"if"</span>: {
    <span class="hljs-attr">"category"</span>: {
     <span class="hljs-attr">"id"</span>: <span class="hljs-string">"consoles-cat"</span>,
     <span class="hljs-attr">"quantity"</span>: <span class="hljs-number">1</span>
    }
  },
  <span class="hljs-attr">"then"</span>: {
    <span class="hljs-attr">"category"</span>: {
     <span class="hljs-attr">"id"</span>: <span class="hljs-string">"games-cat"</span>,
     <span class="hljs-attr">"quantity"</span>: <span class="hljs-number">1</span>,
     <span class="hljs-attr">"discount"</span>: {
       <span class="hljs-attr">"rate"</span>: <span class="hljs-number">1000</span>,
       <span class="hljs-attr">"isFixedPrice"</span>: <span class="hljs-literal">true</span>
     }
    }
  }
}</code></pre><h4 id="7-one-to-one-perfect-partner-bundle">7 - One-to-one perfect partner bundle</h4>
<p>Buy this game and the selected partner accessory together for €25.00.</p>
<p><em>Resolved as fixed price game plus free accesory</em></p>
<pre class="hljs"><code>{
  <span class="hljs-attr">"if"</span>: {
    <span class="hljs-attr">"all"</span>: [
      {<span class="hljs-attr">"product"</span>: {
        <span class="hljs-attr">"id"</span>: <span class="hljs-string">"p001"</span>,
        <span class="hljs-attr">"quantity"</span>: <span class="hljs-number">1</span>
      }},
      {<span class="hljs-attr">"category"</span>: {
        <span class="hljs-attr">"id"</span>: <span class="hljs-string">"accessories-cat"</span>,
        <span class="hljs-attr">"quantity"</span>: <span class="hljs-number">1</span>
      }}
    ]
  },
  <span class="hljs-attr">"then"</span>: {
    <span class="hljs-attr">"all"</span>: [
      {<span class="hljs-attr">"product"</span>: {
        <span class="hljs-attr">"id"</span>: <span class="hljs-string">"p001"</span>,
        <span class="hljs-attr">"quantity"</span>: <span class="hljs-number">1</span>,
        <span class="hljs-attr">"discount"</span>: {
          <span class="hljs-attr">"rate"</span>: <span class="hljs-number">2500</span>,
          <span class="hljs-attr">"isFixedPrice"</span>: <span class="hljs-literal">true</span>
        }
      }},
      {<span class="hljs-attr">"category"</span>: {
        <span class="hljs-attr">"id"</span>: <span class="hljs-string">"accessories-cat"</span>,
        <span class="hljs-attr">"quantity"</span>: <span class="hljs-number">1</span>,
        <span class="hljs-attr">"discount"</span>: {
          <span class="hljs-attr">"rate"</span>: <span class="hljs-number">100</span>,
          <span class="hljs-attr">"isPercentage"</span>: <span class="hljs-literal">true</span>
        }
      }}
    ]
  }
}</code></pre><h4 id="8-perfect-partner-bundle">8 - Perfect partner bundle</h4>
<p>ie: Buy a games console and 3 accessories for €200.</p>
<p><em>Resolved as fixed price game plus free accesories</em></p>
<pre class="hljs"><code>{
  <span class="hljs-attr">"if"</span>: {
    <span class="hljs-attr">"all"</span>: [
      {<span class="hljs-attr">"product"</span>: {
        <span class="hljs-attr">"id"</span>: <span class="hljs-string">"p001"</span>,
        <span class="hljs-attr">"quantity"</span>: <span class="hljs-number">1</span>
      }},
      {<span class="hljs-attr">"category"</span>: {
        <span class="hljs-attr">"id"</span>: <span class="hljs-string">"accessories-cat"</span>,
        <span class="hljs-attr">"quantity"</span>: <span class="hljs-number">3</span>
      }}
    ]
  },
  <span class="hljs-attr">"then"</span>: {
    <span class="hljs-attr">"all"</span>: [
      {<span class="hljs-attr">"product"</span>: {
        <span class="hljs-attr">"id"</span>: <span class="hljs-string">"p001"</span>,
        <span class="hljs-attr">"quantity"</span>: <span class="hljs-number">1</span>,
        <span class="hljs-attr">"discount"</span>: {
          <span class="hljs-attr">"rate"</span>: <span class="hljs-number">20000</span>,
          <span class="hljs-attr">"isFixedPrice"</span>: <span class="hljs-literal">true</span>
        }
      }},
      {<span class="hljs-attr">"category"</span>: {
        <span class="hljs-attr">"id"</span>: <span class="hljs-string">"accessories-cat"</span>,
        <span class="hljs-attr">"quantity"</span>: <span class="hljs-number">3</span>,
        <span class="hljs-attr">"discount"</span>: {
          <span class="hljs-attr">"rate"</span>: <span class="hljs-number">100</span>,
          <span class="hljs-attr">"isPercentage"</span>: <span class="hljs-literal">true</span>
        }
      }}
    ]
  }
}</code></pre><h4 id="9-percentage-discount">9 - Percentage discount</h4>
<p>ie: 20% off all cameras.</p>
<pre class="hljs"><code>{
  <span class="hljs-attr">"if"</span>: {
   <span class="hljs-attr">"category"</span>: {
     <span class="hljs-attr">"id"</span>: <span class="hljs-string">"cameras-cat"</span>,
     <span class="hljs-attr">"quantity"</span>: <span class="hljs-number">1</span>
   }
  },
  <span class="hljs-attr">"then"</span>: {
   <span class="hljs-attr">"category"</span>: {
     <span class="hljs-attr">"id"</span>: <span class="hljs-string">"cameras-cat"</span>,
     <span class="hljs-attr">"quantity"</span>: <span class="hljs-number">1</span>,
     <span class="hljs-attr">"discount"</span>: {
       <span class="hljs-attr">"rate"</span>: <span class="hljs-number">20</span>,
       <span class="hljs-attr">"isPercentaje"</span>: <span class="hljs-literal">true</span>
     }
   }
  }
}</code></pre><h3 id="order-promotions">Order Promotions</h3>
<h4 id="1-order-threshold-fixed-discount">1 - Order threshold fixed discount</h4>
<p>ie: Spend over €50 to receive a €3 discount.</p>
<p>N/A</p>
<h4 id="2-order-threshold-perfect-partner">2 - Order threshold perfect partner</h4>
<p>ie: Spend over €50 to get any shirt (up to 99) for €5.</p>
<pre class="hljs"><code>{
  <span class="hljs-attr">"if"</span>: {
    <span class="hljs-attr">"subtotal"</span>: <span class="hljs-number">50</span>,
    <span class="hljs-attr">"category"</span>: {
      <span class="hljs-attr">"id"</span>: <span class="hljs-string">"shirts-cat"</span>,
      <span class="hljs-attr">"quantity"</span>: <span class="hljs-number">1</span>
    }
  },
  <span class="hljs-attr">"then"</span>: {
    <span class="hljs-attr">"category"</span>: {
      <span class="hljs-attr">"id"</span>: <span class="hljs-string">"shirts-cat"</span>,
      <span class="hljs-attr">"quantity"</span>: <span class="hljs-number">99</span>,
      <span class="hljs-attr">"discount"</span>: {
        <span class="hljs-attr">"rate"</span>: <span class="hljs-number">500</span>,
        <span class="hljs-attr">"isFixedPrice"</span>: <span class="hljs-literal">true</span>
      }
    }
  }
}</code></pre><h4 id="3-order-threshold-free-gift">3 - Order threshold free gift</h4>
<p>ie: Spend over €50 to receive a free t-shirt.</p>
<pre class="hljs"><code>{
  <span class="hljs-attr">"if"</span>: {
    <span class="hljs-attr">"subtotal"</span>: <span class="hljs-number">50</span>,
    <span class="hljs-attr">"category"</span>: {
      <span class="hljs-attr">"id"</span>: <span class="hljs-string">"shirts-cat"</span>,
      <span class="hljs-attr">"quantity"</span>: <span class="hljs-number">1</span>
    }
  },
  <span class="hljs-attr">"then"</span>: {
    <span class="hljs-attr">"category"</span>: {
      <span class="hljs-attr">"id"</span>: <span class="hljs-string">"shirts-cat"</span>,
      <span class="hljs-attr">"quantity"</span>: <span class="hljs-number">1</span>,
      <span class="hljs-attr">"discount"</span>: {
        <span class="hljs-attr">"rate"</span>: <span class="hljs-number">100</span>,
        <span class="hljs-attr">"isPercentaje"</span>: <span class="hljs-literal">true</span>
      }
    }
  }
}</code></pre><h4 id="4-order-threshold-free-voucher">4 - Order threshold free voucher</h4>
<p>ie: Get a free €5 voucher when you spend over €150.00.</p>
<p>N/A</p>
<h4 id="5-order-threshold-change-delivery-mode">5 - Order threshold change delivery mode</h4>
<p>ie: Spend over €10 to get free shipping</p>
<p>N/A</p>
<h2 id="full-example">Full Example</h2>
<p>Given this promotion:</p>
<pre class="hljs"><code>{ 
  <span class="hljs-attr">"id"</span>: <span class="hljs-string">"ryUGgm44"</span>, 
  <span class="hljs-attr">"title"</span>: <span class="hljs-string">"Promotion 03"</span>, 
  <span class="hljs-attr">"class"</span>: <span class="hljs-string">"default"</span>, 
  <span class="hljs-attr">"active"</span>: <span class="hljs-literal">true</span>, 
  <span class="hljs-attr">"priority"</span>: <span class="hljs-number">100</span>, 
  <span class="hljs-attr">"if"</span>:   {
    <span class="hljs-attr">"category"</span>:   {
      <span class="hljs-attr">"id"</span>: <span class="hljs-string">"By-4rrmsN"</span>, 
      <span class="hljs-attr">"quantity"</span>: <span class="hljs-number">3</span>, 
      <span class="hljs-attr">"lowestPrice"</span>: <span class="hljs-literal">true</span>
    }
  }, 
  <span class="hljs-attr">"then"</span>:   {
    <span class="hljs-attr">"category"</span>:   {
      <span class="hljs-attr">"id"</span>: <span class="hljs-string">"By-4rrmsN"</span>, 
      <span class="hljs-attr">"quantity"</span>: <span class="hljs-number">3</span>, 
      <span class="hljs-attr">"discount"</span>: {
        <span class="hljs-attr">"rate"</span>: <span class="hljs-number">1000</span>, 
        <span class="hljs-attr">"isFixedPrice"</span>: <span class="hljs-literal">true</span>
      }
    }
  }
}</code></pre><p>and this cart:</p>
<pre class="hljs"><code>{ 
  <span class="hljs-attr">"id"</span>: <span class="hljs-string">"HyvYROObg"</span>, 
  <span class="hljs-attr">"items"</span>:   [
    {
      <span class="hljs-attr">"id"</span>: <span class="hljs-string">"HkgWytObl"</span>, 
      <span class="hljs-attr">"productId"</span>: <span class="hljs-string">"By2ZWfAPnV"</span>, 
      <span class="hljs-attr">"quantity"</span>: <span class="hljs-number">1</span>, 
      <span class="hljs-attr">"price"</span>: { <span class="hljs-attr">"amount"</span>: <span class="hljs-number">57765</span>, <span class="hljs-attr">"currency"</span>: <span class="hljs-string">"USD"</span>, <span class="hljs-attr">"precision"</span>: <span class="hljs-number">2</span> }, 
      <span class="hljs-attr">"title"</span>: <span class="hljs-string">"001004721736835 - Frigorífico combi Samsung RB31FEJNCSS/EF No Frost (Samsung)"</span>
    }, 
    {
      <span class="hljs-attr">"id"</span>: <span class="hljs-string">"BJmzJtdbe"</span>, 
      <span class="hljs-attr">"productId"</span>: <span class="hljs-string">"HyTWWMRw34"</span>, 
      <span class="hljs-attr">"quantity"</span>: <span class="hljs-number">2</span>, 
      <span class="hljs-attr">"price"</span>: { <span class="hljs-attr">"amount"</span>: <span class="hljs-number">32147</span>, <span class="hljs-attr">"currency"</span>: <span class="hljs-string">"USD"</span>, <span class="hljs-attr">"precision"</span>: <span class="hljs-number">2</span> },
      <span class="hljs-attr">"title"</span>: <span class="hljs-string">"001004721727941 - Frigorífico combi Saivod CT1830DNF No Frost (Saivod)"</span>
    }, 
    {
      <span class="hljs-attr">"id"</span>: <span class="hljs-string">"ryqjio_Ze"</span>, 
      <span class="hljs-attr">"productId"</span>: <span class="hljs-string">"rkQMWG0P2V"</span>, 
      <span class="hljs-attr">"quantity"</span>: <span class="hljs-number">2</span>, 
      <span class="hljs-attr">"price"</span>: { <span class="hljs-attr">"amount"</span>: <span class="hljs-number">46900</span>, <span class="hljs-attr">"currency"</span>: <span class="hljs-string">"USD"</span>, <span class="hljs-attr">"precision"</span>: <span class="hljs-number">2</span> },
      <span class="hljs-attr">"title"</span>: <span class="hljs-string">"001004721744961 - Frigorífico combi Fagor FFK6778A No Frost (Fagor)"</span>
    }
  ]
}</code></pre><p>the promotion engine will output:</p>
<pre class="hljs"><code>{
  <span class="hljs-attr">"ok"</span>: <span class="hljs-literal">true</span>,
  <span class="hljs-attr">"almostFulfilledPromos"</span>: [
  {
    <span class="hljs-attr">"id"</span>: <span class="hljs-string">"ryUGgm44"</span>,
    <span class="hljs-attr">"data"</span>: [
      {
        <span class="hljs-attr">"collectedQuantity"</span>: <span class="hljs-number">2</span>,
        <span class="hljs-attr">"promoQuantity"</span>: <span class="hljs-number">3</span>,
        <span class="hljs-attr">"threshold"</span>: <span class="hljs-number">0.6666666666666666</span>,
        <span class="hljs-attr">"value"</span>: <span class="hljs-number">0.6666666666666666</span>,
        <span class="hljs-attr">"type"</span>: <span class="hljs-string">"CATEGORY"</span>,
        <span class="hljs-attr">"code"</span>: <span class="hljs-string">"By-4rrmsN"</span>,
        <span class="hljs-attr">"items"</span>: [
        {
          <span class="hljs-attr">"itemId"</span>: <span class="hljs-string">"ryqjio_Ze"</span>,
          <span class="hljs-attr">"quantityToUse"</span>: <span class="hljs-number">1</span>
        },
        {
          <span class="hljs-attr">"itemId"</span>: <span class="hljs-string">"HkgWytObl"</span>,
          <span class="hljs-attr">"quantityToUse"</span>: <span class="hljs-number">1</span>
        }
        ]
      }
      ]
    }
  ],
  <span class="hljs-attr">"itemDiscounts"</span>: [
    {
      <span class="hljs-attr">"id"</span>: <span class="hljs-string">"BJmzJtdbe"</span>,
      <span class="hljs-attr">"discounts"</span>: [
        {
          <span class="hljs-attr">"promotionId"</span>: <span class="hljs-string">"ryUGgm44"</span>,
          <span class="hljs-attr">"promotionTitle"</span>: <span class="hljs-string">"Promotion 03"</span>,
          <span class="hljs-attr">"quantity"</span>: <span class="hljs-number">2</span>,
          <span class="hljs-attr">"price"</span>: {
            <span class="hljs-attr">"amount"</span>: <span class="hljs-number">32147</span>,
            <span class="hljs-attr">"currency"</span>: <span class="hljs-string">"USD"</span>,
            <span class="hljs-attr">"precision"</span>: <span class="hljs-number">2</span>
          },
          <span class="hljs-attr">"discount"</span>: {
            <span class="hljs-attr">"amount"</span>: <span class="hljs-number">31147</span>,
            <span class="hljs-attr">"currency"</span>: <span class="hljs-string">"USD"</span>,
            <span class="hljs-attr">"precision"</span>: <span class="hljs-number">2</span>
          }
        }
      ]
    },
    {
      <span class="hljs-attr">"id"</span>: <span class="hljs-string">"ryqjio_Ze"</span>,
      <span class="hljs-attr">"discounts"</span>: [
        {
          <span class="hljs-attr">"promotionId"</span>: <span class="hljs-string">"ryUGgm44"</span>,
          <span class="hljs-attr">"promotionTitle"</span>: <span class="hljs-string">"Promotion 03"</span>,
          <span class="hljs-attr">"quantity"</span>: <span class="hljs-number">1</span>,
          <span class="hljs-attr">"price"</span>: {
            <span class="hljs-attr">"amount"</span>: <span class="hljs-number">46900</span>,
            <span class="hljs-attr">"currency"</span>: <span class="hljs-string">"USD"</span>,
            <span class="hljs-attr">"precision"</span>: <span class="hljs-number">2</span>
          },
          <span class="hljs-attr">"discount"</span>: {
            <span class="hljs-attr">"amount"</span>: <span class="hljs-number">45900</span>,
            <span class="hljs-attr">"currency"</span>: <span class="hljs-string">"USD"</span>,
            <span class="hljs-attr">"precision"</span>: <span class="hljs-number">2</span>
          }
        }
      ]
    }
  ]  
}</code></pre><p>and the final cart will look:</p>
<pre class="hljs"><code>{
  <span class="hljs-attr">"id"</span>: <span class="hljs-string">"HyvYROObg"</span>,
  <span class="hljs-attr">"promotions"</span>: {
    <span class="hljs-attr">"ok"</span>: <span class="hljs-literal">true</span>,
    <span class="hljs-attr">"almostFulfilledPromos"</span>: [
      {
        <span class="hljs-attr">"id"</span>: <span class="hljs-string">"ryUGgm44"</span>,
        <span class="hljs-attr">"data"</span>: [
          {
            <span class="hljs-attr">"items"</span>: [
              {
                <span class="hljs-attr">"quantityToUse"</span>: <span class="hljs-number">1</span>,
                <span class="hljs-attr">"itemId"</span>: <span class="hljs-string">"ryqjio_Ze"</span>
              },
              {
                <span class="hljs-attr">"quantityToUse"</span>: <span class="hljs-number">1</span>,
                <span class="hljs-attr">"itemId"</span>: <span class="hljs-string">"HkgWytObl"</span>
              }
            ],
            <span class="hljs-attr">"code"</span>: <span class="hljs-string">"By-4rrmsN"</span>,
            <span class="hljs-attr">"type"</span>: <span class="hljs-string">"CATEGORY"</span>,
            <span class="hljs-attr">"value"</span>: <span class="hljs-number">0.6666666666666666</span>,
            <span class="hljs-attr">"threshold"</span>: <span class="hljs-number">0.6666666666666666</span>,
            <span class="hljs-attr">"promoQuantity"</span>: <span class="hljs-number">3</span>,
            <span class="hljs-attr">"collectedQuantity"</span>: <span class="hljs-number">2</span>
          }
        ]
      }
    ]
  },
  <span class="hljs-attr">"items"</span>: [
    {
      <span class="hljs-attr">"id"</span>: <span class="hljs-string">"HkgWytObl"</span>,
      <span class="hljs-attr">"productId"</span>: <span class="hljs-string">"By2ZWfAPnV"</span>,
      <span class="hljs-attr">"quantity"</span>: <span class="hljs-number">1</span>,
      <span class="hljs-attr">"price"</span>: { <span class="hljs-attr">"amount"</span>: <span class="hljs-number">57765</span>, <span class="hljs-attr">"currency"</span>: <span class="hljs-string">"USD"</span>, <span class="hljs-attr">"precision"</span>: <span class="hljs-number">2</span> },
      <span class="hljs-attr">"title"</span>: <span class="hljs-string">"001004721736835 - Frigorífico combi Samsung RB31FEJNCSS/EF No Frost (Samsung)"</span>,
      <span class="hljs-attr">"discounts"</span>: [],
      <span class="hljs-attr">"taxes"</span>: [
        {
          <span class="hljs-attr">"taxDetail"</span>: <span class="hljs-string">"IVA 21%"</span>,
          <span class="hljs-attr">"tax"</span>: { <span class="hljs-attr">"amount"</span>: <span class="hljs-number">12130</span>, <span class="hljs-attr">"currency"</span>: <span class="hljs-string">"USD"</span>, <span class="hljs-attr">"precision"</span>: <span class="hljs-number">2</span> },
          <span class="hljs-attr">"beforeTax"</span>: { <span class="hljs-attr">"amount"</span>: <span class="hljs-number">57765</span>, <span class="hljs-attr">"currency"</span>: <span class="hljs-string">"USD"</span>, <span class="hljs-attr">"precision"</span>: <span class="hljs-number">2</span> }
        }
      ]
    },
    {
      <span class="hljs-attr">"id"</span>: <span class="hljs-string">"BJmzJtdbe"</span>,
      <span class="hljs-attr">"productId"</span>: <span class="hljs-string">"HyTWWMRw34"</span>,
      <span class="hljs-attr">"quantity"</span>: <span class="hljs-number">2</span>,
      <span class="hljs-attr">"price"</span>: { <span class="hljs-attr">"amount"</span>: <span class="hljs-number">32147</span>, <span class="hljs-attr">"currency"</span>: <span class="hljs-string">"USD"</span>, <span class="hljs-attr">"precision"</span>: <span class="hljs-number">2</span> },
      <span class="hljs-attr">"title"</span>: <span class="hljs-string">"001004721727941 - Frigorífico combi Saivod CT1830DNF No Frost (Saivod)"</span>,
      <span class="hljs-attr">"discounts"</span>: [
        {
          <span class="hljs-attr">"promotionId"</span>: <span class="hljs-string">"ryUGgm44"</span>,
          <span class="hljs-attr">"promotionTitle"</span>: <span class="hljs-string">"Promotion 03"</span>,
          <span class="hljs-attr">"quantity"</span>: <span class="hljs-number">2</span>,
          <span class="hljs-attr">"discount"</span>: { <span class="hljs-attr">"amount"</span>: <span class="hljs-number">31147</span>, <span class="hljs-attr">"currency"</span>: <span class="hljs-string">"USD"</span>, <span class="hljs-attr">"precision"</span>: <span class="hljs-number">2</span> }
        }
      ],
      <span class="hljs-attr">"taxes"</span>: [
        {
          <span class="hljs-attr">"taxDetail"</span>: <span class="hljs-string">"IVA 21%"</span>,
          <span class="hljs-attr">"tax"</span>: { <span class="hljs-attr">"amount"</span>: <span class="hljs-number">420</span>, <span class="hljs-attr">"currency"</span>: <span class="hljs-string">"USD"</span>, <span class="hljs-attr">"precision"</span>: <span class="hljs-number">2</span> },
          <span class="hljs-attr">"beforeTax"</span>: { <span class="hljs-attr">"amount"</span>: <span class="hljs-number">2000</span>, <span class="hljs-attr">"currency"</span>: <span class="hljs-string">"USD"</span>, <span class="hljs-attr">"precision"</span>: <span class="hljs-number">2</span> }
        }
      ]
    },
    {
      <span class="hljs-attr">"id"</span>: <span class="hljs-string">"ryqjio_Ze"</span>,
      <span class="hljs-attr">"productId"</span>: <span class="hljs-string">"rkQMWG0P2V"</span>,
      <span class="hljs-attr">"quantity"</span>: <span class="hljs-number">2</span>,
      <span class="hljs-attr">"price"</span>: { <span class="hljs-attr">"amount"</span>: <span class="hljs-number">46900</span>, <span class="hljs-attr">"currency"</span>: <span class="hljs-string">"USD"</span>, <span class="hljs-attr">"precision"</span>: <span class="hljs-number">2</span> },
      <span class="hljs-attr">"title"</span>: <span class="hljs-string">"001004721744961 - Frigorífico combi Fagor FFK6778A No Frost (Fagor)"</span>,
      <span class="hljs-attr">"discounts"</span>: [
        {
          <span class="hljs-attr">"promotionId"</span>: <span class="hljs-string">"ryUGgm44"</span>,
          <span class="hljs-attr">"promotionTitle"</span>: <span class="hljs-string">"Promotion 03"</span>,
          <span class="hljs-attr">"quantity"</span>: <span class="hljs-number">1</span>,
          <span class="hljs-attr">"discount"</span>: { <span class="hljs-attr">"amount"</span>: <span class="hljs-number">45900</span>, <span class="hljs-attr">"currency"</span>: <span class="hljs-string">"USD"</span>, <span class="hljs-attr">"precision"</span>: <span class="hljs-number">2</span> }
        }
      ],
      <span class="hljs-attr">"taxes"</span>: [
        {
          <span class="hljs-attr">"taxDetail"</span>: <span class="hljs-string">"IVA 21%"</span>,
          <span class="hljs-attr">"tax"</span>: { <span class="hljs-attr">"amount"</span>: <span class="hljs-number">10059</span>, <span class="hljs-attr">"currency"</span>: <span class="hljs-string">"USD"</span>, <span class="hljs-attr">"precision"</span>: <span class="hljs-number">2</span> },
          <span class="hljs-attr">"beforeTax"</span>: { <span class="hljs-attr">"amount"</span>: <span class="hljs-number">47900</span>, <span class="hljs-attr">"currency"</span>: <span class="hljs-string">"USD"</span>, <span class="hljs-attr">"precision"</span>: <span class="hljs-number">2</span> }
        }
      ]
    }
  ],
  <span class="hljs-attr">"taxes"</span>: {
    <span class="hljs-attr">"beforeTax"</span>: { <span class="hljs-attr">"amount"</span>: <span class="hljs-number">107665</span>, <span class="hljs-attr">"currency"</span>: <span class="hljs-string">"USD"</span>, <span class="hljs-attr">"precision"</span>: <span class="hljs-number">2</span> },
    <span class="hljs-attr">"tax"</span>: { <span class="hljs-attr">"amount"</span>: <span class="hljs-number">22610</span>, <span class="hljs-attr">"currency"</span>: <span class="hljs-string">"USD"</span>, <span class="hljs-attr">"precision"</span>: <span class="hljs-number">2</span> },
    <span class="hljs-attr">"ok"</span>: <span class="hljs-literal">true</span>
  }
}</code></pre>    </div>
  </div>
</div>


<div class="footer container">
  <p class="centered">&copy; MicroBase <?php echo date("Y"); ?></p>
</div><!-- /container -->

<!-- Bootstrap core JavaScript
================================================== -->
<!-- Placed at the end of the document so the pages load faster -->
<script src="https://code.jquery.com/jquery-1.10.2.min.js"></script>
<script src="../../assets//js/bootstrap.min.js"></script>
<!-- highlightjs -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.5.0/highlight.min.js"></script>
<script>hljs.initHighlightingOnLoad();</script>

</body>
</html>
